{
  "arxiv_id": "2507.01839v1",
  "nodes": [
    {
      "id": "remark-1-6960960b",
      "type": "remark",
      "content": "This proof below is made more complicated when $Z(N)$, the center of $N$, is non-trivial and made even more complicated when $Z(N)$ has torsion. Since many interesting groups virtually have trivial centers, the reader may first want to consider the special case where $Z(N)$ is trivial, in which case Claim 1 is settled by a single paragraph.",
      "content_preview": "This proof below is made more complicated when Z(N), the center of N, is non-trivial and made even more complicated when Z(N) has torsion.",
      "display_name": "Remark",
      "label": null,
      "position": {
        "line_start": 509,
        "line_end": 511
      },
      "references": [
        {
          "target_id": "eqn:diag1",
          "reference_type": "external",
          "context": "cd}.\n\\end{equation}\n    First, looking at diagram \\eqref{eqn:diag1}, we see that $\\pi(K_\\Gamma)$ maps to a finite ind",
          "position": {
            "line_start": 0,
            "line_end": null
          }
        },
        {
          "target_id": "eqn:diag1",
          "reference_type": "external",
          "context": "/N)*_{H/N}(G_2/N)$ if make an analogue of diagram \\eqref{eqn:diag1} with $\\pi(K_\\Gamma)$ in place of $J$ it is immedi",
          "position": {
            "line_start": 0,
            "line_end": null
          }
        }
      ],
      "proof": "Without loss of generality we can assume the commensuration is non-trivial, otherwise the result holds immediately. By hypothesis we have the following diagram of finite index inclusions with the image of $N$ being normal in all codomains.\n\\[\n  \\begin{tikzcd}\n    &N \\arrow[hookrightarrow]{dr}{h_2} \\arrow[d,phantom,sloped,\"\\leq\"]& \\\\\n    G_1\\arrow[hookleftarrow]{ru}{h_1}\\arrow[hookleftarrow]{r}{i_1}  &H \\arrow[hookrightarrow]{r}{i_2}  & G_2\\\\\n  \\end{tikzcd}\n\\] \nWe form the associated amalgamated free product $G_1*_HG_2$ and we consider $N$ and $H$ as subgroups of $G_1$ and $G_2$ and $G_1,G_2$ as subgroups of $G_1*_HG_2$. By hypothesis, $N$ is a normal subgroup of this amalgamated free product and the canonical quotient is the free product\\[\n    (G_1*_HG_2)/N \\simeq (G_1/N) *_{H/N} (G_2/N),    \n    \\] which, as an essential amalgamated product of finite groups, is virtually free (see \\cite{karrass_finite_1973}). This means that there is a finite index normal free subgroup $J \\leq (G_1/N) *_{H/N} (G_2/N)$. Consider the commuting following commutative diagram of short exact sequences\n    \\begin{equation}\\label{eqn:diag1}\n        \\begin{tikzcd}\n            & & & 1\\arrow{d} &\\\\\n           1\\arrow{r} & H \\arrow[hook]{r}& \\pi^{-1}(J) \\arrow[two heads]{r}{\\pi|_{\\pi^{-1}(J)}} \\arrow[phantom,sloped]{d}{\\leq} & J \\arrow{r}\\arrow[hook]{d}& 1\\\\\n           1 \\arrow{r} & H \\arrow[hook]{r} & G_1*_HG_2 \\arrow[two heads]{r}{\\pi}& (G_1/N)*_{H/N}(G_2/N) \\arrow{r}1\\arrow[two heads]{d}& 1\\\\\n           & & & F\\arrow{d}&\\\\\n           & & & 1&\\\\\n        \\end{tikzcd}\n    \\end{equation}\n    where hooked inclusion arrows ($\\hookrightarrow$) are inclusions of normal subgroups, two headed arrows ($\\twoheadrightarrow$) are canonical quotient maps, and $F$ is a finite group. Now since $J$ is a free group, the top row of the diagram splits and we have the semidirect product\\[\n        \\pi^{-1}(J) = N\\hat J \\simeq N \\rtimes_{\\phi} \\hat J   \n    \\] where $\\hat J$ is an isomorphic lift of $J$ to $\\pi^{-1}(J) \\leq G_1*_HG_2$ and $\\phi: \\hat J \\to \\aut(N)$ is the homomorphism induced by conjugation of $\\hat J$ on $H$. Now by hypothesis \\[\\calO((G_1*_HG_2)/N) = \\langle\\calO(G_1/N),\\calO(G_2/N)\\rangle \\subset \\out(N)\\] is finite, which means that the image of $\\hat J$ in $\\out(N)$ via the restriction $\\calO|_{\\hat J}$ is also finite. We may therefore take a finite index characteristic subgroup $K\\leq J$ (which is normal in $(G_1/N)*_{H/N}(G_2/N)$) such that the natural image of $\\hat K \\subset \\hat J$ in $\\out(N)$ is trivial, where $\\hat K$ is the preimage of $K$ via the isomorphic lift $J \\to \\hat J$. $\\hat K$ is free and finitely generated, so we may pick a basis $\\{k_1,\\ldots,k_n\\}$. Triviality of the image of $\\hat K$ in $\\out(N)$ tells us that for each $k_i,i=1,\\ldots,n$ there exists $h_i \\in H$ such that for every $h \\in H$ \\[k_i h k_i^{-1} = h_i h {h_i}^{-1}.\\]  We may therefore modify our lift of $\\hat K$ by replacing to $k_i$ by $k_ih_i^{-1} = k_i'$. The subgroup $K' = \\langle k_1',\\ldots, k_n'\\rangle \\leq G_1*_HG_2$ still maps isomorphically to $K\\leq (G_1/H)*(G_2/H)$ and we still have $\\pi^{-1}(K) = NK'$ but now we also have that for all $h\\in H$ and all $k\\in K'$ that $khk^{-1}=h$ so that\\[\n        \\pi^{-1}(K) = NK'= N\\times K'.\n      \\] Our notation here means that, when convenient, we will express elements of $NK'$ as pairs $(n,k)$ and that we identify $N,K'$ with $N\\times\\{1\\},\\{1\\}\\times K'$  respectively. In particular $K'$ is a normal subgroup of $NK'$. This, however, is not enough to guarantee that $K'$ is normal in $G_1*_HG_2$.\n\n      \\textbf{Claim 1:} \\emph{$K'$ contains a finite index characteristic subgroup that is a normal subgroup of $G_1*_HG_2$.} Since $\\pi^{-1}(K) = NK'$ is a finite index normal subgroup of $G_1*_HG_2$, conjugation induces a natural map $g\\mapsto \\phi_g \\in \\aut(NK')$ that has a finite image $\\Gamma \\leq \\out(NK')$. We will denote by $\\Phi_g$ the image of the automorphism $\\phi_g$ in $\\out(NK')$.\n\n      Since $N$ is normal in $G_1*_HG_2$, these automorphisms of $NK'$ leave $N$ invariant. For any $g \\in G_1*_HG_2$ and $k \\in K'$ we have \\[\n    \\phi_g(k) = g k g^{-1} = k_gh_{k,g}\n    \\] for some $h_{k,g}\\in N$ and $k_g\\in K'$. Since $g k g^{-1}$ must still commute with every element in $N$ we have that $h_{k,g} \\in Z(N)$, i.e. it must be in the center of $N$. If $N$ has trivial center then $gkg^{-1} = k_g \\in K' \\leq NK'$ for all $k\\in K', g\\in G_1*_HG_2$ so $K'$ is normal in $G_1*_HG_2$ as required. In this case we set $K' = K_\\Gamma$ and the claim holds.\n\n    \n    Since $Z(N)$ is characteristic in $N$ by calculations above we have that \\[\n        Z(N)K' = Z(N)\\times K'\n    \\] is a normal subgroup of $G_1*_HG_2$. Suppose furthermore that there is some $k\\in K'$ and some $g \\in G$ such that\\[g k g^{-1} = \\phi_g(k) = k_gh_{k,g} \\not\\in K'.\\] \n    We now further modify $K'$ to eventually get normal subgroup of $G_1*_HG_2$ that maps to a finite index subgroup of $J$. On the one hand $K'$ is a free group of rank $n$ and $Z(N)$ is an \n    abelian group, or equivalently a $\\bbZ$-module. In particular, every automorphism of $Z(N)K'$ descends to an automorphism of the abelianization \\[\n     \\left(NK'\\right)_{ab}=Z(N)\\times K'_{ab} = M.\n   \\]\nFor any element of $g\\in NK'$ we will denote by $\\bar g$ its image in $M$. Since $\\aut(M)=\\out(M)$ we actually have a natural action of the finite group $\\Gamma$ on $M$, making $M$ into a $\\bbZ\\Gamma$-module. This structure is capable of detecting the non-normality of $K'$ in $G_1*_HG_2$. Indeed, if $\\phi_g(k) = k_gh_{k,g}\\not\\in K'$ then $\\Phi_g$ acts non-trivially on $M$ since \\[\n    \\Phi_g \\cdot(1,\\bar k) = (\\underbrace{h_{k,g}}_{\\neq 1},\\bar k_g) \\in Z(N) \\times K_{ab}'=M.\n    \\] \n\n    Let $\\rho_0:Z(N)\\times K_{ab}' \\twoheadrightarrow Z(N)$ be the canonical projection onto the first factor, by hypothesis $\\rho_0$ is not $\\Gamma$-invariant since its kernel $K_{ab}'$ isn't. We now use a classical trick from the representation theory of finite groups (see \\cite[\\S 1.2]{fulton_representation_2004}). Let\\[\n    \\rho(v) = \\sum_{\\gamma \\in \\Gamma} \\gamma\\cdot \\rho_0(\\gamma^{-1}\\cdot v).\n    \\] By hypothesis, $Z(N)$ is $\\Gamma$-invariant so $\\rho: Z(N)\\times K_{ab}' \\to Z(N)$ is a $\\Gamma$-equivariant $\\bbZ$-linear map to $Z(N)$ that restricts on $Z(N)$ to scalar multiplication by $|\\Gamma|$. In particular $\\rho$ is injective on set of infinite order elements of $Z(N)$ and we have\\[Z(N)\\cap\\ker(\\rho) = \\{h \\in Z(N): |\\Gamma|h=0\\}.\\] $\\Gamma$-equivariance of $\\rho$ implies that $\\ker(\\rho)$ is also $\\Gamma$ invariant. The goal is be to modify $K'$ so that it maps to $\\ker(\\rho)$ and to get ``something like'' $M=Z(N)\\times \\ker(\\rho)$. \n\n    There are two issues to overcome that stem from the fact that $Z(N)$ could be any abelian group. The first is that it is not clear from this construction that $M \\leq Z(N)+\\ker(\\rho)$. The second issue is that even if $M = Z(N)+\\ker(\\rho)$, because the sumands may have non-trivial intersection, we could have $M\\not\\simeq Z(N)\\times\\ker(\\pi)$. We will overcome these issues by passing to submodules.  \n    \n    \n    Consider first \n    \\[|\\Gamma|M = \\{\\underbrace{m+\\cdots+m}_{|\\Gamma|\\textrm{~terms}} \\in M :m\\in M\\}.\\] In this case, recalling that $\\rho$ restricted to $Z(N)$ is scalar multiplication by $|\\Gamma|$, since $\\rho(|\\Gamma|M) \\leq \\rho(Z(N))$ we can deduce the inclusion \\begin{equation}\\label{eqn:inclusion}\n    |\\Gamma|M\\leq Z(N)+\\ker(\\rho)\\end{equation} as follows: let $|\\Gamma|m \\in |\\Gamma|M$ be arbitrary. Then $\\rho(|\\Gamma|m)=|\\Gamma|\\rho(m) = |\\Gamma|h_m$ for some $h_m \\in Z(N)$. Since $\\rho(|\\Gamma|m-h_m)=0$ we deduce that there is some $z\\in \\ker(\\rho)$ such that $|\\Gamma|m = h_m+z$ as required.\n    \n    \n  Now $K_{ab}'\\cap |\\Gamma|M = |\\Gamma|K_{ab}'\n  $ is a finite index characteristic subgroup of $K_{ab}'$ and so we define $K'_\\Gamma \\leq K'$ to be its preimage. $K'_{\\Gamma}$ is free with basis $\\{\\kappa_1',\\ldots,\\kappa_m'\\}$ and since it's characteristic in $K'$ its image $\\pi(K'_\\Gamma)$ is normal, thus $\\pi^{-1}(\\pi(K'_\\Gamma)) = NK'_\\Gamma \\leq NK'$ remains a normal subgroup of $G_1*_HG_2$ and we still have $K'_\\Gamma\\cap N = \\{1\\}.$ Now consider the image $\\overline{K_\\Gamma'}$ of $K'_\\Gamma$ in the abelianization $M$. We note that $\\overline{K_\\Gamma'}$ will not isomorphic to the abelianization of $K'_\\Gamma$ as it will be a subgroup of $K'_{ab}\\leq M$.\n\n  \n    \n    $\\overline{K'_\\Gamma}$ lies in $Z(N)+\\ker(\\rho)$ \n    so we have \n    decompositions\\[\n        \\overline{\\kappa_i'} = h_i'+z_i', i=1,\\ldots, m\n    \\] with $h_i' \\in Z(N), z_i' \\in \\ker(\\rho)$. In order to control torsion we will replace $M$ by a finitely generated module as follows: let \n    \\begin{eqnarray*}\n        M' &=& \\mathrm{span}_{\\bbZ\\Gamma}\\{h_1',\\ldots,h_m',z_1',\\ldots,z_m'\\} \\geq \\overline{K_\\Gamma'} \\\\\n        M'' &=&  \\mathrm{span}_{\\bbZ\\Gamma}M' \\cup \\rho(K'_{ab}).\n    \\end{eqnarray*}\n    $M''$ is a finitely generated $\\bbZ\\Gamma$-module and, since $\\Gamma$ is finite, it is also finitely generated as a $\\bbZ$-module. It follows by the basic theory of finitely generated $\\bbZ$-modules that there is a period $p \\in \\bbN$ such that $pM''$ is torsion-free.\n\n\n    We repeat the construction above to obtain the finite index characteristic subgroup $K''_\\Gamma \\leq K'_\\Gamma$ which is the preimage of $p \\overline{K_\\Gamma'} \\leq pM''\\leq (p|\\Gamma|)M$. Let $k \\in p\\overline{K'_\\Gamma}=\\overline{K''_\\Gamma}$. On the one hand we have\\[\n    \\rho(k) = \\rho(p|\\Gamma|m) = p|\\Gamma|\\rho(m)=p|\\Gamma|h\n    \\] for some $m\\in K'_{ab}$ and some $h\\in Z(N)\\cap\\rho(K'_{ab}) \\leq Z(N)\\cap M''$. In particular we find that \\[\n        k-ph =z\\in \\ker(\\rho)\n    \\] and since $k,ph \\in pM''$ we have that $z \\in pM''$. From this we deduce \\[\n    \\overline{K''_\\Gamma}=(p|\\Gamma|)K_{ab} \\leq \\left(Z(N)\\cap pM''\\right) + \\left(\\ker(\\rho)\\cap pM''\\right).\n    \\] By eliminating torsion we have ensured that $\\left(Z(N)\\cap pM''\\right)$ and $\\left(\\ker(\\rho)\\cap pM''\\right)$ have trivial intersection. This means that if we take a basis $\\{\\kappa''_1,\\ldots,\\kappa''_{r}\\}$ of $K''_\\Gamma$ and consider their images $\\overline{\\kappa''_i} \\in (p|\\Gamma|)K_{ab}\\leq pM'', i=1,\\ldots,r$ then for each $i$ we have a unique decomposition\\[\n        \\overline{\\kappa''_i} = h_i+z_i,\n    \\] with $h_i\\in Z(N)\\cap pM''$ and $z_i \\in \\ker(\\rho)\\cap pM''$.\n\n    We finally take $K_\\Gamma\\leq Z(N)K_\\Gamma''$ as the free group with basis $\\{\\kappa_1,\\ldots,\\kappa_r\\}$ where $\\kappa_i = \\kappa''_ih_{i}^{-1}$ and $\\kappa''_i$ was a basis element for $K_\\Gamma''$ given above. On the one hand, we still have $Z(N)K''_\\Gamma = Z(N)K_\\Gamma$ and $Z(N)K_\\Gamma = Z(N)\\times K_\\Gamma$. The abelianization map for $Z(H)K'$ restricted to $K_\\Gamma$ still maps $K_\\Gamma$ to $M''$ but now $K_\\Gamma$ maps entirely to $\\ker(\\rho)\\cap pM''$, which is $\\Gamma$-invariant. \n    \n    We will now show that $K_\\Gamma$ is normal in $G_1*_HG_2$. Suppose otherwise, then there is some basis element $\\kappa_i$ and some $g \\in G_1*_HG_2$ with $g\\kappa_i g^{-1} =\\phi_g(\\kappa_i) = k_{g,i}h_{g_i}$ with $k_{g,i}\\in K_\\Gamma, h_{g,i}\\in Z(N)\\setminus\\{1\\}$. Then mapping to $M$ we see that the image $\\overline{\\kappa_i} = z_i \\in \\ker(\\rho)\\cap pM''$ and that $\\overline{\\phi_g(\\kappa_i)} = \\Phi_g \\cdot z_i = \\overline{k_{g,i}}+h_{g,i}$. On the one hand $\\ker(\\rho)\\cap pM''$ is $\\Gamma$-invariant so $\\overline{k_{g,i}}+h_{g,i} \\in \\ker(\\rho)\\cap pM''$. On the other hand, since $\\overline{K_\\Gamma} \\leq \\ker(\\rho)\\cap pM''$, we conclude that $h_{g,i} \\in \\ker(\\rho)\\cap pM''$. Now $Z(N)\\cap \\ker(\\rho)$ consists of torsion elements, but $pM''$ is torsion-free which implies that $h_{g,i}=0$ contradicting the assumption that it is non-trivial. Thus, $K_\\Gamma$ is the desired subgroup and the claim is proved.\n\n    We will finally show that the desired completion is\n\\begin{equation}\\label{eqn:second-completion}\n\\begin{tikzcd}\n    &H \\arrow[hookrightarrow]{dr}{i_2}&\\\\\n    G_1\\arrow[hookleftarrow]{ru}{i_1}  \\arrow[hookrightarrow]{dr}{j_1}&&G_2\\\\\n    &(G_1*_{H}G_2)/K_\\Gamma \\arrow[hookleftarrow]{ru}{j_2} &\\\\\n\\end{tikzcd}.\n\\end{equation}\n    First, looking at diagram \\eqref{eqn:diag1}, we see that $\\pi(K_\\Gamma)$ maps to a finite index subgroup of $J$. In particular its image has trivial intersection with the images of $G_1$ and $G_2$ and since $K_\\Gamma\\cap N=\\{1\\}$ we have that $G_i \\cap K_\\Gamma = \\{1\\}, i=1,2$. Thus $G_1,G_2$ are mapped injectively via the canonical quotient map $G_1*_HG_2 \\twoheadrightarrow (G_1*_HG_2)/K_\\Gamma$. We can therefore identify $N,H,G_1,G_2$ with their images in $(G_1*_HG_2)/K_\\Gamma$. Finally since $\\pi(K_\\Gamma)$ is a finite index normal subgroup of $(G_1/N)*_{H/N}(G_2/N)$ if make an analogue of diagram \\eqref{eqn:diag1} with $\\pi(K_\\Gamma)$ in place of $J$ it is immediate that \\[\n    ((G_1*_{H}G_2)/K_\\Gamma)/N\\simeq (G_1*_{H}G_2)/\\pi^{-1}(\\pi(K_\\Gamma)) \\simeq ((G_1/N)*_{H/N}(G_2/N))/\\pi(K_\\Gamma)\n    \\]  is finite. So $N$, and therefore also $G_1,G_2$, are finite index subgroups of $(G_1*_{H}G_2)/K_\\Gamma$. Thus $(j_1,j_2)$ is the desired co-commensuration and the result follows."
    },
    {
      "id": "external_eqn:diag1",
      "type": "unknown",
      "content": "External reference to 'eqn:diag1'",
      "content_preview": "External reference to 'eqn:diag1'",
      "display_name": "Unknown",
      "label": "eqn:diag1",
      "position": {
        "line_start": 0,
        "line_end": null
      },
      "references": [],
      "proof": null
    }
  ],
  "edges": [
    {
      "source": "remark-1-6960960b",
      "target": "external_eqn:diag1",
      "type": null
    }
  ],
  "stats": {
    "node_count": 2,
    "edge_count": 1,
    "extractor_used": "regex-only"
  }
}